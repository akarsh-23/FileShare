addEventListener("message",({data:t})=>{let r=t.files,n=t.apiUrl,a=t.id,o=new FormData;r.forEach(e=>{o.append(e.name,e.content,e.name)});let s=new XMLHttpRequest;s.open("POST",`${n}/upload/${a}/images`,!0),s.upload.onprogress=e=>{if(e.lengthComputable){let p=Math.round(e.loaded/e.total*100);postMessage({progress:p})}},s.onload=()=>{if(s.status>=200&&s.status<300){let e=JSON.parse(s.responseText);postMessage({success:!0,result:e})}else postMessage({success:!1,error:s.statusText})},s.onerror=()=>{postMessage({success:!1,error:s.statusText})},s.send(o)});
